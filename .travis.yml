# Documentation: http://docs.travis-ci.com/user/languages/julia/
language: julia
os:
  - linux
  - osx

julia:
  - 1.1

cache:
  directories:
  - "$HOME/.julia"

matrix:
  fast_finish: true

notifications:
  email: false

addons:
  apt:
    packages:
    - xorg-dev

before_script:
  - if [[ "$TRAVIS_OS_NAME" == linux ]] ; then export DISPLAY=:99.0; sh -e /etc/init.d/xvfb start ; fi

after_success:
  - if [[ "$TRAVIS_OS_NAME" == linux && "$TRAVIS_JULIA_VERSION" == "1.1" ]] ; then julia --project=. -e 'using Pkg;
                                                                                                         Pkg.add("Coverage");
                                                                                                         using Coverage;
                                                                                                         Codecov.submit(process_folder())' ; fi
